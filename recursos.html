<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RECURSOS by AJRA</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="images/AJRA.png">
    <meta name="description" content="EVENTOS by AJRA">
    <meta property="og:title" content="EVENTOS by AJRA">
    <meta property="og:description" content="Calendario de eventos de AJRA">
    <meta property="og:image" content="eventos/eventos.png">
    <meta property="og:url" content="https://ajra.es/eventos">
    <script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="d475f634-84bb-448f-9a73-b0576d734398"
        async></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <header>
        <a href="https://ajra.es">
            <img src="eventos/AJRA.webp" alt="AJRA" class="avatar">
        </a>
    </header>
    <div class="home">
        <img src="recursos/RECURSOS.webp" alt="AJRA" style="border-radius: 50%; margin-bottom: 25px;">
        <h1>RECURSOS by AJRA</h1>
        <h2>Bienvenido a mi directorio, donde descubrirás los recursos y herramientas No-Code que te ayudarán a crear y
            hacer crecer tu negocio online, sin necesidad de saber nada de código.</h2>
    </div>
    <div class="filter-buttons">
        <button onclick="filterResources('todos')" class="botonesfiltro">TODOS</button>
        <button onclick="filterResources('automatizaciones')" class="botonesfiltro">AUTOMATIZACIONES</button>
        <button onclick="filterResources('datos')" class="botonesfiltro">BASES DE DATOS</button>
        <button onclick="filterResources('web')" class="botonesfiltro">DESARROLLO WEB</button>
        <button onclick="filterResources('grafico')" class="botonesfiltro">DISEÑO</button>
        <button onclick="filterResources('email')" class="botonesfiltro">EMAIL</button>
        <button onclick="filterResources('formularios')" class="botonesfiltro">FORMULARIOS</button>
        <button onclick="filterResources('ia')" class="botonesfiltro">INTELIGENCIA ARTIFICIAL</button>
        <button onclick="filterResources('productividad')" class="botonesfiltro">PRODUCTIVIDAD</button>
        <button onclick="filterResources('utilidades')" class="botonesfiltro">UTILIDADES</button>
        <input type="text" id="searchInput" class="buscador" oninput="searchResources()" placeholder="Buscar recursos...">

    </div>
    <div id="events" class="row"></div>
    <footer>2023 &copy; Desarrollado con 🧠 & 💛 por <a href="https://ajra.es"
            style="text-decoration: none; color: black"> &lt;/AJRA&gt; </a></footer>
</body>

</html>
<script>
    const SPREADSHEET_ID = '1bjuRsUCQLT_MwgKQ9GR7gPHJyYq339v-JHM_ErPbGjI';
    const API_KEY = 'AIzaSyBVknxjJb5j7AFLBrltXfOptE1xWweeGJ0';
    const recursosContainer = document.getElementById('events');

    // Función para crear una tarjeta de recurso
    function createRecursoCard(event) {
        const card = document.createElement('div');
        card.classList.add('card');
        const cardLink = document.createElement('a');
        cardLink.href = event.url;
        const cardImage = createCardImage(event.imagen, event.recurso);
        const cardBody = createCardBody(event.recurso, event.descripcion);
        cardLink.appendChild(cardImage);
        cardLink.appendChild(cardBody);
        card.appendChild(cardLink);
        return card;
    }

    // Función para crear la imagen de la tarjeta
    function createCardImage(imageSrc, altText) {
        const cardImage = document.createElement('img');
        cardImage.src = imageSrc;
        cardImage.alt = altText;
        return cardImage;
    }

    function createCardBody(title, description) {
    const cardBody = document.createElement('div');
    cardBody.className = 'card-body';
    const cardTitle = document.createElement('h2');
    cardTitle.className = 'recurso';
    cardTitle.textContent = title;
    
    const cardDescription = document.createElement('div'); 
    cardDescription.className = 'descripcion';
        const descriptionLines = description.split('\n');
    descriptionLines.forEach((line, index) => {
        cardDescription.appendChild(document.createTextNode(line));
        if(index < descriptionLines.length - 1) {
            cardDescription.appendChild(document.createElement('br'));
        }
    });
    
    cardBody.appendChild(cardTitle);
    cardBody.appendChild(cardDescription);
    return cardBody;
}

    function fetchGoogleSheetResources() {
        const sheetRange = 'Recursos!A2:E';
        const sheetUrl = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${sheetRange}?key=${API_KEY}`;

        fetch(sheetUrl)
            .then(response => response.json())
            .then(data => {
                const rows = data.values || [];
                allResources = rows.map(row => {
                    const [recurso, descripcion, imageFilename, url, categoria] = row;
                    return {
                        recurso,
                        descripcion,
                        imagen: `recursos/${imageFilename}`,
                        url: url || '#',
                        categoria
                    };
                });
                displayResources(allResources);
            })
            .catch(error => {
                console.error('Error:', error);
            });
    }

    function displayResources(resources) {
        recursosContainer.innerHTML = '';

        resources.forEach(event => {
            recursosContainer.appendChild(createRecursoCard(event));
        });
    }

    document.addEventListener('DOMContentLoaded', fetchGoogleSheetResources);

    function filterResources(categoria) {
    document.querySelectorAll('.botonesfiltro').forEach(button => {
        button.classList.add('inactive');
    });

    if (categoria === 'todos') {
        document.querySelectorAll('.botonesfiltro').forEach(button => {
            button.classList.remove('inactive');
        });
    } else {
        event.currentTarget.classList.remove('inactive');
    }

    if (categoria === 'todos') {
        displayResources(allResources);
    } else {
        const filteredResources = allResources.filter(resource => resource.categoria.toLowerCase() === categoria);
        displayResources(filteredResources);
    }
}

    function searchResources() {
    const searchString = document.getElementById('searchInput').value.toLowerCase();

    const filteredResources = allResources.filter(resource => 
        resource.recurso.toLowerCase().includes(searchString) ||
        resource.descripcion.toLowerCase().includes(searchString)
    );

    displayResources(filteredResources);
}

</script>

<style>
    a {
        text-decoration: none;
        color: black;
    }

    .home h2 {
        margin: 5px 25px;
    }
</style>