<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#f0f0f0">
    <title>iPad Adictos by AJRA</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="images/AJRA.webp">
    <meta name="description" content="Productos recomendados para iPad by AJRA">
    <meta property="og:title" content="iPad Adictos by AJRA">
    <meta property="og:description" content="Los mejores productos y accesorios recomendados para tu iPad">
    <meta property="og:image" content="images/AJRA.webp">
    <meta property="og:url" content="https://ajra.es/ipadadictos.html">
    <script src="https://beamanalytics.b-cdn.net/beam.min.js" data-token="d475f634-84bb-448f-9a73-b0576d734398" async></script>
    <link href="css/eventos.css" rel="stylesheet" type="text/css" />
    <style>
        /* --------- UI de producto --------- */
        .precio{
          color: rgb(108, 41, 240);
          font-weight: 700;
          font-size: 1.1rem;
          margin: .5rem 0;
        }
      
        .rating{
          color:#FF9500;
          font-size:.9rem;
          margin:.25rem 0;
        }
      
        .product-badge{
          background:#FF9500;
          color:#fff;
          padding:.3rem .6rem;
          border-radius:.4rem;
          font-size:.75rem;
          position:absolute;
          top:.5rem; right:.5rem;
          z-index:10;
        }
      
        .buy-btn{
          background:rgb(108,41,240);
          color:#fff; border:0;
          padding:.8rem 1.2rem;
          border-radius:.6rem;
          cursor:pointer;
          transition:transform .2s ease, filter .2s ease;
          text-decoration:none; display:inline-block;
          font-weight:600;
          font-size: 0.8rem;
        }
        .buy-btn:hover{ transform:translateY(-1px); filter:brightness(.95); }
      
        /* --------- Card --------- */
        .card{
          position:relative;
          background:#fff;
          border-radius:10px;
          box-shadow:0 2px 10px rgba(0,0,0,.08);
          overflow:hidden;
          transition:transform .2s ease, box-shadow .2s ease;
        }
        .card:hover{ transform:translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,.12); }
      
        .card-body{ padding:1rem; }
      
        .titulo{
          margin:.4rem 0;
          line-height:1.3;
          min-height:2.6rem;
          display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
        }
      
        .descripcion{
          font-size:.92rem; color:#666;
          margin:.5rem 0; line-height:1.45;
          min-height:2.8rem;
          display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;
        }
      
        /* --------- IMAGEN: SIEMPRE CENTRADA Y CONTENIDA --------- */
        .product-image-container{
          width: 100%;
          height: 240px;
          background: white;
          display: flex;
          align-items: center;
          justify-content: center;
          box-sizing: border-box;
        }
      
        /* hace clicable toda la zona manteniendo el centrado */
        .product-image-container > a{
          width: 100%;
          height: 100%;
          display: flex;
          align-items: center;
          justify-content: center;
        }
      
        .product-image{
          max-width: calc(100% - 40px);
          max-height: calc(100% - 40px);
          width: auto;
          height: auto;
          object-fit: contain;
          display: block;
        }
      

      
        /* Botones de filtro ‚Äúactivo‚Äù (ya lo usabas como .inactive) */
        .botonesfiltro.inactive{
          opacity:.55;
          outline:2px solid rgba(108,41,240,.2);
        }
      </style>
</head>
<body>
    <header>
        <a href="https://ajra.es">
            <img src="images/AJRA.webp" alt="AJRA" class="avatar">
        </a>
    </header>
    <div class="home">
        <img src="images/ipadadictos.jpg" alt="iPad Adictos" style="border-radius: 50%; margin-bottom: 25px; width: 150px; height: 150px; object-fit: cover;">
        <h2>Productos y accesorios recomendados para tu iPad</h2>
        <a href="https://instagram.com/ipadadictos">
            <h2 class="suscribirse">SIGUENOS EN INSTAGRAM</h2>
        </a>
    </div>
    <div class="filter-buttons">
        <button onclick="filterProducts('todos')" class="botonesfiltro">TODOS</button>
        <button onclick="filterProducts('fundas')" class="botonesfiltro">FUNDAS</button>
        <button onclick="filterProducts('teclados')" class="botonesfiltro">TECLADOS</button>
        <button onclick="filterProducts('stylus')" class="botonesfiltro">STYLUS</button>
        <button onclick="filterProducts('soportes')" class="botonesfiltro">SOPORTES</button>
        <button onclick="filterProducts('accesorios')" class="botonesfiltro">ACCESORIOS</button>
        <input type="text" id="searchInput" class="buscador" oninput="searchProducts()" placeholder="Buscar producto...">
    </div>
    <div id="products" class="row"></div>
    <footer>2025 &copy; Desarrollado con üß† & üíõ por <a href="https://ajra.es" style="text-decoration: none; color: black"> &lt;/AJRA&gt; </a></footer>
</body>
<script>
    const SPREADSHEET_ID = '1sNp1jFfy3A-hOJ1pJgFxrinK8popHVbWN8YYVnhwdfk';
    const API_KEY = 'AIzaSyDHVVcZFKRrE2AObzJXPn-1zNI8lecjxy0';
    const productsContainer = document.getElementById('products');
    const placeholderImage = 'images/placeholder.webp';
    let allProducts = [];
    let currentFilter = 'todos';

    const displayProducts = (products) => {
        productsContainer.innerHTML = '';
        products.forEach(({ nombre, precio, descripcion, imagen, categoria, url, rating, badge }) => {
            const card = document.createElement('div');
            card.className = 'card';
            card.setAttribute('data-categoria', categoria.toLowerCase());
            
            const badgeHTML = badge ? `<div class="product-badge">${badge}</div>` : '';
            const ratingHTML = rating ? `<div class="rating">‚≠ê ${rating}/5</div>` : '';
            
            card.innerHTML = `
                ${badgeHTML}
                <div class="product-image-container">
                    <a href="${url || '#'}" target="_blank">
                        <img src="${imagen}" class="product-image" alt="${nombre}" onerror="this.src='${placeholderImage}'">
                    </a>
                </div>
                <div class="card-body">
                    <h2 class="titulo">${nombre}</h2>
                    ${ratingHTML}
                    <div class="precio">${precio}</div>
                    <p class="descripcion">${descripcion}</p>
                    <div class="faltan-container">
                        <a href="${url || '#'}" target="_blank" class="buy-btn">VER PRODUCTO</a>
                    </div>
                </div>`;
            productsContainer.appendChild(card);
        });
    };

    const filterProducts = (categoria) => {
        currentFilter = categoria;
        
        // Actualizar botones activos
        document.querySelectorAll('.botonesfiltro').forEach(btn => {
            btn.classList.remove('inactive');
        });
        event.target.classList.add('inactive');
        
        const filteredProducts = categoria === 'todos' 
            ? allProducts 
            : allProducts.filter(product => product.categoria.toLowerCase() === categoria);
        displayProducts(filteredProducts);
    };

    const searchProducts = () => {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const baseProducts = currentFilter === 'todos' 
            ? allProducts 
            : allProducts.filter(product => product.categoria.toLowerCase() === currentFilter);
            
        const filteredProducts = baseProducts.filter(product =>
            product.nombre.toLowerCase().includes(searchTerm) ||
            product.descripcion.toLowerCase().includes(searchTerm) ||
            product.categoria.toLowerCase().includes(searchTerm)
        );
        displayProducts(filteredProducts);
    };

    const fetchGoogleSheetProducts = async () => {
        try {
            // Nota: Cambiar 'Productos' por el nombre de la hoja que contenga los productos del iPad
            const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Productos!A2:H?key=${API_KEY}`);
            const data = await response.json();

            allProducts = (data.values || []).map(row => {
                const [nombre, precio, descripcion, imagen, categoria, url, rating, badge] = row;
                return {
                    nombre: nombre || 'Producto sin nombre',
                    precio: precio || 'Precio no disponible',
                    descripcion: descripcion || 'Sin descripci√≥n',
                    imagen: imagen || placeholderImage,
                    categoria: categoria || 'general',
                    url: url || '#',
                    rating: rating || '',
                    badge: badge || ''
                };
            }).filter(product => product.nombre !== 'Producto sin nombre');

            displayProducts(allProducts);
            
            // Activar el bot√≥n "TODOS" por defecto
            document.querySelector('.botonesfiltro').classList.add('inactive');
            
        } catch (error) {
            console.error('Error al cargar productos:', error);
            productsContainer.innerHTML = '<p style="text-align: center; color: #666; margin: 2rem;">Error al cargar los productos. Por favor, intenta m√°s tarde.</p>';
        }
    };

    // Cargar productos al cargar la p√°gina
    fetchGoogleSheetProducts();
    
    // Hacer las funciones globales para que funcionen con onclick
    window.filterProducts = filterProducts;
    window.searchProducts = searchProducts;
</script>
</html>
